<!DOCTYPE html>
<meta charset="UTF-8">
<html>
<head>
    <title>LetterBoost</title>
    <style>
        body { font-family: Arial; height: 100%; padding: 10px; width: 450px; }

        /* Onglets */
        .tab {
            display: inline-block;
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-bottom: none;
            background: #eee;
            margin-right: -1px;
        }
        .tab.active { background: #fff; font-weight: bold; }
        .tab-content { border: 1px solid #ccc; padding: 10px; display: none; }

        button { width: 100%; padding: 10px; font-size: 16px; margin-top: 10px; }
        textarea { width: 100%; height: 350px; margin-top: 10px; }
        input[type="text"] { width: 100%; padding: 8px; margin-top: 10px; }

        /* Historique styles */
        .history-item {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        
        .history-item-date {
            font-size: 12px;
            color: #666;
        }
        
        .history-item-url {
            font-size: 12px;
            color: #0066cc;
            word-break: break-all;
            margin: 5px 0;
        }
        
        .history-item-buttons {
            display: flex;
            gap: 5px;
            margin-top: 5px;
        }
        
        .history-item-buttons button {
            flex: 1;
            padding: 5px;
            font-size: 12px;
            margin: 0;
        }
    </style>
</head>
<body>
    <h1>LetterBoost</h1>

    <!-- Onglets -->
    <div>
        <div class="tab active" data-tab="general">General</div>
        <div class="tab" data-tab="settings">Settings</div>
        <div class="tab" data-tab="history">History</div>  <!-- âœ… AJOUTER -->
    </div>

    <!-- Contenu onglets -->
    <div id="general" class="tab-content" style="display:block;">
        <textarea id="output" placeholder="Your letter will appear here..."></textarea>
        <button id="generateBtn">Generate Cover Letter</button>
        <button id="downloadBtn">Download as TXT</button>
    </div>

    <div id="settings" class="tab-content">
        <label for="languageSelect">Language:</label>
        <select id="languageSelect">
            <option value="fr" selected>ğŸ‡«ğŸ‡· FranÃ§ais</option>
            <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
            <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
            <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
            <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
            <option value="nl">ğŸ‡³ğŸ‡± Nederlands</option>
            <option value="sv">ğŸ‡¸ğŸ‡ª Svenska</option>
            <option value="no">ğŸ‡³ğŸ‡´ Norsk</option>
            <option value="da">ğŸ‡©ğŸ‡° Dansk</option>
            <option value="fi">ğŸ‡«ğŸ‡® Suomi</option>
            <option value="pl">ğŸ‡µğŸ‡± Polski</option>
            <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
            <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        </select>

        <input type="text" id="apiKeyInput" placeholder="Enter your Gemini API key" />
        <button id="saveApiKeyBtn">Save API Key</button>

        <textarea id="cvInput" placeholder="Paste your CV here..."></textarea>
        <button id="saveCvBtn">Save CV</button>

        <p id="message" style="color:green;"></p> 
        <p id="errorMsg" style="color:red; display:none;"></p>
    </div>

    <!-- âœ… NOUVEL ONGLET HISTORY -->
    <div id="history" class="tab-content">
        <!-- ===== FORM TO ADD MANUAL JOB URL ===== -->
        <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 15px; border-radius: 5px; background-color: #f9f9f9;">
            <h3 style="margin-top: 0; font-size: 14px;">ğŸ“ Add Current Job</h3>
            <button id="addManualJobBtn" style="width: 100%; padding: 10px; background-color: #4CAF50; color: white; cursor: pointer;">Add Current Tab to History</button>
        </div>

        <!-- ===== HISTORY LIST ===== -->
        <div id="historyList" style="max-height: 250px; overflow-y: auto;">
            <p style="color: #999;">No history yet...</p>
        </div>

        <!-- ===== EXPORT & CLEAR BUTTONS ===== -->
        <div style="display: flex; gap: 5px; margin-top: 10px;">
            <button id="exportCsvBtn" style="flex: 1; padding: 10px; background-color: #2196F3; color: white; cursor: pointer;">ğŸ“¥ Export CSV</button>
            <button id="clearHistoryBtn" style="flex: 1; padding: 10px; background-color: #ff6b6b; color: white; cursor: pointer;">ğŸ—‘ï¸ Clear</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="libs/pdf-lib.min.js"></script>
    <script src="popup.js"></script>

</body>
</html>
